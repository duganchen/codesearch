{% extends "frame.html" %}

{% block page_title %}Code Search{% endblock %}

{% block title %}Code Search{% endblock %}

{% block css %}
	<link href="{{ url_for('static', filename='codesearch.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}

	<div data-ng-app="CodeSearch" data-ng-controller="SearchCtrl">
		<p><input type="search" data-ng-model="search.term" data-ng-change="do_search()"></p>
		<p>
			<a href="http://sphinxsearch.com/docs/2.0.9/extended-syntax.html" target="_blank">Search Help</a>
		</p>
		<ul class="list-group" data-ng-repeat="result in search.results">
			<li class="list-group-item ng-cloak"><a data-ng-href="{{ '{{result.display_url}}' }}" data-popup="{{ '{{result.ajax_url}}' }}">{{ '{{result.path}}' }}</a></li>
		</ul>

		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">{{ '{{modal.getTitle()}}' }}</h4>
						<a id="link" data-ng-href="{{ '{{modal.getUrl()}}' }}">Link</a>
					</div>
					<div class="modal-body" data-ng-bind-html-unsafe="modal.getBody()"></div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
	</div>
{% endblock %}

{% block js %}
	<script>
	(function () {
	    'use strict';

		window.urls = JSON.parse({% autoescape false %}'{{ urls }}'{% endautoescape %});
	}());
	</script>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular-sanitize.js"></script>
	<script src="{{ url_for('static', filename='codesearch.js') }}"></script>
{% endblock %}
